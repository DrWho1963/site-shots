  prepare:
    runs-on: ubuntu-latest
    outputs:
      urls: ${{ steps.collect.outputs.urls }}
    steps:
      - uses: actions/checkout@v4

      - id: collect
        env:
          SHOT_URLS: ${{ secrets.SHOT_URLS }}
        shell: bash
        run: |
          cat << 'EOF' > defaults.json
[
  "https://www.mayspaving.com/",
  "https://prioritybus.com/",
  "https://naturescharmboutique.com/",
  "https://www.darrenbgreen.com/",
  "https://eastersurveying.land/",
  "https://stumpcreeksausage.com/",
  "https://coldrunnerslogistics.com/",
  "https://www.oilfieldpatents.com/",
  "https://www.energy-ip.com/",
  "https://www.procraftwoodworks.com/",
  "https://soultoearththerapies.com/",
  "https://www.bradthetreeman.com/",
  "https://bestitchedemb.com/",
  "https://maxpenningtonseries.com/",
  "https://darrenbgreen.com/",
  "http://systemsandcontrols.com/",
  "https://www.greenspage.com/"
]
EOF
          sudo apt-get update -y && sudo apt-get install -y jq
          if [ -n "$SHOT_URLS" ]; then
            # parse secret list first
            python - << 'PY' > urls.json
import os, json
raw = os.environ.get("SHOT_URLS","")
urls1 = [u.strip() for u in raw.split(",") if u.strip()]
defaults = json.load(open("defaults.json"))
# combine without duplication
combined = urls1 + [u for u in defaults if u not in urls1]
print(json.dumps(combined))
PY
          else
            # no secret override: use defaults
            cp defaults.json urls.json
          fi
          echo "urls=$(jq -c . urls.json)" >> "$GITHUB_OUTPUT"
